*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:     #08080f;
  --s1:     #0f0f1a;
  --s2:     #16162a;
  --s3:     #1e1e30;
  --s4:     #252538;
  --b1:     #2a2a42;
  --b2:     #363650;
  --accent: #ff6b35;
  --green:  #00d4a0;
  --blue:   #4d8eff;
  --red:    #ff4d6d;
  --purple: #b06bff;
  --yellow: #ffd166;
  --t1:     #f0f0fa;
  --t2:     #a0a0c0;
  --t3:     #5a5a80;
  --t4:     #35354a;
  --ff: 'Instrument Sans', sans-serif;
  --fd: 'Syne', sans-serif;
  --fm: 'DM Mono', monospace;
  --r:  12px;
  --rs: 8px;
  --rl: 18px;
  --shadow: 0 4px 24px rgba(0,0,0,.4);
  --shadow-lg: 0 8px 48px rgba(0,0,0,.6);
}

body {
  font-family: var(--ff);
  background: var(--bg);
  color: var(--t1);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: var(--s1); }
::-webkit-scrollbar-thumb { background: var(--b2); border-radius: 4px; }

a { color: inherit; text-decoration: none; }
button { cursor: pointer; font-family: var(--ff); }
input, select, textarea { font-family: var(--ff); }

@keyframes fadeIn   { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp  { from { transform: translateY(16px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
@keyframes spin     { to   { transform: rotate(360deg) } }
@keyframes pulse    { 0%,100% { opacity: 1 } 50% { opacity: .3 } }
@keyframes scanBeam { 0%,100% { top: 8% } 50% { top: 88% } }

/* ── Layout ── */
.layout { display: flex; min-height: 100vh; }

/* ── Sidebar ── */
.sidebar {
  width: 225px; background: var(--s1); border-right: 1px solid var(--b1);
  display: flex; flex-direction: column; position: fixed;
  top: 0; left: 0; height: 100vh; z-index: 200;
  transition: width .2s;
}
.sidebar-logo { padding: 18px 20px 16px; border-bottom: 1px solid var(--b1); display: flex; align-items: center; gap: 10px; }
.sidebar-logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg,var(--accent),#ff3a80); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0; }
.sidebar-logo-text { font-family: var(--fd); font-weight: 800; font-size: 20px; letter-spacing: -.5px; }
.sidebar-logo-sub  { font-size: 10px; color: var(--t3); font-family: var(--fm); }
.sidebar-nav { flex: 1; padding: 10px 8px; overflow-y: auto; }
.nav-section { font-size: 10px; color: var(--t4); font-family: var(--fm); text-transform: uppercase; letter-spacing: 2px; padding: 10px 8px 4px; }
.nav-link {
  display: flex; align-items: center; gap: 10px; padding: 9px 12px; border-radius: var(--rs);
  color: var(--t2); font-size: 13px; font-weight: 500; background: none; border: none;
  width: 100%; transition: all .15s; white-space: nowrap;
}
.nav-link:hover  { background: var(--s2); color: var(--t1); }
.nav-link.active { background: rgba(255,107,53,.15); color: var(--accent); }
.nav-icon { font-size: 16px; width: 20px; text-align: center; flex-shrink: 0; }
.nav-badge { margin-left: auto; background: var(--red); color: #fff; border-radius: 10px; font-size: 10px; padding: 2px 7px; font-family: var(--fm); }
.sidebar-foot { padding: 14px 18px; border-top: 1px solid var(--b1); font-size: 11px; color: var(--t3); font-family: var(--fm); display: flex; align-items: center; gap: 6px; }
.db-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--green); }

/* ── Main ── */
.main { margin-left: 225px; flex: 1; display: flex; flex-direction: column; min-height: 100vh; }
.topbar { background: var(--s1); border-bottom: 1px solid var(--b1); padding: 0 24px; height: 56px; display: flex; align-items: center; gap: 12px; position: sticky; top: 0; z-index: 100; }
.topbar-title { font-family: var(--fd); font-size: 16px; font-weight: 700; flex: 1; }
.page { padding: 22px; flex: 1; animation: fadeIn .2s; }

/* ── Buttons ── */
.btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; border-radius: var(--rs); font-size: 13px; font-weight: 600; transition: all .15s; border: none; white-space: nowrap; }
.btn:disabled { opacity: .4; cursor: not-allowed; }
.btn-primary { background: var(--accent); color: #fff; }
.btn-primary:hover:not(:disabled) { background: #ff8050; transform: translateY(-1px); }
.btn-ghost   { background: var(--s2); color: var(--t1); border: 1px solid var(--b1); }
.btn-ghost:hover:not(:disabled) { background: var(--s3); }
.btn-success { background: rgba(0,212,160,.15); color: var(--green); border: 1px solid rgba(0,212,160,.25); }
.btn-success:hover:not(:disabled) { background: rgba(0,212,160,.25); }
.btn-danger  { background: rgba(255,77,109,.12); color: var(--red); border: 1px solid rgba(255,77,109,.2); }
.btn-danger:hover:not(:disabled)  { background: rgba(255,77,109,.22); }
.btn-blue    { background: rgba(77,142,255,.15); color: var(--blue); border: 1px solid rgba(77,142,255,.25); }
.btn-purple  { background: rgba(176,107,255,.15); color: var(--purple); border: 1px solid rgba(176,107,255,.25); }
.btn-sm  { padding: 5px 10px; font-size: 12px; }
.btn-xs  { padding: 3px 8px;  font-size: 11px; }
.btn-icon { padding: 7px; border-radius: var(--rs); background: var(--s2); border: 1px solid var(--b1); color: var(--t2); font-size: 15px; line-height: 1; transition: all .15s; }
.btn-icon:hover { color: var(--t1); background: var(--s3); }
.btn-full { width: 100%; justify-content: center; }

/* ── Cards ── */
.card { background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); padding: 20px; }
.card-title { font-family: var(--fd); font-size: 14px; font-weight: 700; margin-bottom: 14px; }
.card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }

/* ── Stats ── */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 20px; }
.stat-card { background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); padding: 16px; position: relative; overflow: hidden; }
.stat-glow { position: absolute; top: -14px; right: -14px; width: 68px; height: 68px; border-radius: 50%; opacity: .1; }
.stat-lbl  { font-size: 10px; color: var(--t3); font-family: var(--fm); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 5px; }
.stat-val  { font-family: var(--fd); font-size: 24px; font-weight: 800; }
.stat-sub  { font-size: 11px; color: var(--t3); margin-top: 3px; }

/* ── Table ── */
.tbl-wrap { overflow-x: auto; border-radius: var(--r); border: 1px solid var(--b1); }
table { width: 100%; border-collapse: collapse; background: var(--s1); }
th { text-align: left; padding: 10px 14px; font-size: 10px; font-family: var(--fm); text-transform: uppercase; letter-spacing: 1.5px; color: var(--t3); border-bottom: 1px solid var(--b1); white-space: nowrap; }
td { padding: 11px 14px; border-bottom: 1px solid var(--b1); font-size: 13px; color: var(--t2); }
tr:last-child td { border-bottom: none; }
tbody tr:hover td { background: rgba(255,255,255,.018); }
td.bold { color: var(--t1); font-weight: 600; }
td.mono { font-family: var(--fm); font-size: 12px; }
td.accent { color: var(--accent); font-family: var(--fm); font-weight: 700; }
td.green  { color: var(--green); }

/* ── Badges ── */
.badge { display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 20px; font-size: 11px; font-weight: 600; font-family: var(--fm); white-space: nowrap; }
.bg { background: rgba(0,212,160,.12);  color: var(--green);  border: 1px solid rgba(0,212,160,.2);  }
.bo { background: rgba(255,107,53,.12); color: var(--accent); border: 1px solid rgba(255,107,53,.2); }
.bb { background: rgba(77,142,255,.12); color: var(--blue);   border: 1px solid rgba(77,142,255,.2); }
.br { background: rgba(255,77,109,.12); color: var(--red);    border: 1px solid rgba(255,77,109,.2); }
.bp { background: rgba(176,107,255,.12);color: var(--purple); border: 1px solid rgba(176,107,255,.2);}
.by { background: rgba(255,209,102,.12);color: var(--yellow); border: 1px solid rgba(255,209,102,.2);}
.bk { background: var(--s2);            color: var(--t3);     border: 1px solid var(--b1);           }

/* ── Forms ── */
.form-group { margin-bottom: 12px; }
.form-label { display: block; font-size: 12px; color: var(--t2); margin-bottom: 5px; font-weight: 600; }
.form-hint  { font-size: 11px; color: var(--t3); margin-top: 4px; }
.form-input {
  width: 100%; background: var(--s2); border: 1px solid var(--b2); border-radius: var(--rs);
  padding: 9px 12px; color: var(--t1); font-size: 13px; outline: none; transition: border .15s;
}
.form-input:focus { border-color: var(--accent); }
.form-input::placeholder { color: var(--t4); }
select.form-input option { background: var(--s2); }
textarea.form-input { resize: vertical; min-height: 64px; }
.form-row  { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.form-row3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

/* ── Modal ── */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.78); z-index: 500;
  display: flex; align-items: center; justify-content: center;
  animation: fadeIn .15s; backdrop-filter: blur(6px);
}
.modal {
  background: var(--s1); border: 1px solid var(--b2); border-radius: var(--rl);
  padding: 26px; width: 90vw; max-width: 540px; max-height: 90vh; overflow-y: auto;
  animation: slideUp .2s;
}
.modal-lg { max-width: 680px; }
.modal-xl { max-width: 820px; }
.modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px; }
.modal-title  { font-family: var(--fd); font-size: 17px; font-weight: 700; }
.modal-close  { background: none; border: none; color: var(--t3); font-size: 22px; line-height: 1; transition: color .15s; padding: 2px; }
.modal-close:hover { color: var(--t1); }
.modal-footer { display: flex; justify-content: flex-end; gap: 8px; margin-top: 18px; padding-top: 14px; border-top: 1px solid var(--b1); }

/* ── Search dropdown ── */
.search-wrap { position: relative; }
.search-drop {
  position: absolute; top: calc(100% + 4px); left: 0; right: 0;
  background: var(--s2); border: 1px solid var(--b2); border-radius: var(--rs);
  z-index: 400; max-height: 260px; overflow-y: auto; box-shadow: var(--shadow-lg);
}
.drop-item { display: flex; align-items: center; gap: 10px; padding: 9px 14px; cursor: pointer; border-bottom: 1px solid var(--b1); }
.drop-item:last-child { border-bottom: none; }
.drop-item:hover { background: var(--s3); }
.drop-footer { padding: 8px 12px; border-top: 1px solid var(--b1); background: var(--s1); }

/* ── Avatar ── */
.avatar { border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #fff; flex-shrink: 0; }
.av-sm { width: 28px; height: 28px; font-size: 11px; }
.av-md { width: 36px; height: 36px; font-size: 13px; }
.av-lg { width: 44px; height: 44px; font-size: 17px; }

/* ── List items ── */
.list-item { display: flex; align-items: center; gap: 14px; padding: 13px; background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); margin-bottom: 9px; cursor: pointer; transition: all .15s; }
.list-item:hover { border-color: var(--b2); background: var(--s2); }

/* ── Spinner / empty ── */
.spinner { width: 20px; height: 20px; border: 2px solid var(--b2); border-top-color: var(--accent); border-radius: 50%; animation: spin .7s linear infinite; display: inline-block; }
.spinner-lg { width: 36px; height: 36px; border-width: 3px; }
.loading-page { display: flex; align-items: center; justify-content: center; padding: 80px; gap: 12px; color: var(--t3); font-size: 14px; }
.empty-state { text-align: center; padding: 60px 20px; color: var(--t3); }
.empty-icon { font-size: 48px; margin-bottom: 12px; opacity: .3; display: block; }
.empty-text { font-size: 14px; }

/* ── Misc ── */
.grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.grid3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 14px; }
.divider { height: 1px; background: var(--b1); margin: 12px 0; }
.chip { display: inline-flex; align-items: center; padding: 2px 7px; background: var(--s2); border: 1px solid var(--b1); border-radius: 12px; font-size: 11px; color: var(--t3); }
.tabs-bar { display: flex; gap: 3px; background: var(--s2); padding: 3px; border-radius: var(--rs); width: fit-content; margin-bottom: 16px; }
.tab-btn { padding: 7px 14px; border-radius: 6px; border: none; background: none; font-size: 12px; font-weight: 600; color: var(--t3); transition: all .15s; }
.tab-btn.active { background: var(--s3); color: var(--t1); }
.section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; flex-wrap: wrap; gap: 10px; }

/* ── Products grid ── */
.products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(185px,1fr)); gap: 12px; }
.product-card { background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); padding: 14px; transition: all .15s; }
.product-card:hover { border-color: var(--b2); transform: translateY(-2px); }
.product-thumb { width: 100%; aspect-ratio: 1; background: var(--s2); border-radius: var(--rs); display: flex; align-items: center; justify-content: center; font-size: 34px; margin-bottom: 10px; border: 1px solid var(--b1); }
.product-name  { font-weight: 700; font-size: 13px; margin-bottom: 2px; }
.product-sku   { font-size: 10px; color: var(--t3); font-family: var(--fm); margin-bottom: 7px; }
.product-price { font-family: var(--fd); font-size: 16px; font-weight: 800; color: var(--accent); }

/* ── Order builder ── */
.order-layout { display: grid; grid-template-columns: 1fr 380px; gap: 16px; align-items: start; }
.cart-sticky { position: sticky; top: 76px; }
.cart-panel { background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); display: flex; flex-direction: column; }
.cart-head { padding: 12px 16px; border-bottom: 1px solid var(--b1); }
.cart-body { padding: 8px; max-height: 320px; overflow-y: auto; }
.cart-item { display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: var(--rs); border: 1px solid var(--b1); margin-bottom: 5px; background: var(--s2); }
.cart-foot { padding: 12px 16px; border-top: 1px solid var(--b1); }
.total-row  { display: flex; justify-content: space-between; align-items: center; padding: 3px 0; font-size: 12px; color: var(--t2); }
.total-grand { font-family: var(--fd); font-size: 20px; font-weight: 800; color: var(--green); }

/* ── Dispatch ── */
.dispatch-card { background: var(--s1); border: 1px solid var(--b1); border-radius: var(--r); padding: 15px; margin-bottom: 11px; }
.dispatch-head { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 10px; }
.dispatch-item { display: flex; align-items: center; gap: 8px; padding: 6px 10px; background: var(--s2); border-radius: var(--rs); margin-bottom: 4px; font-size: 12px; }

/* ── Scanner ── */
.scanner-layout { display: grid; grid-template-columns: 1fr 380px; gap: 18px; align-items: start; }
.scan-video-wrap { position: relative; background: #000; border-radius: var(--r); overflow: hidden; border: 2px solid var(--b2); aspect-ratio: 4/3; }
.scan-video-wrap video { width: 100%; height: 100%; object-fit: cover; display: block; }
.scan-video-wrap canvas { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; }
.scan-frame-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; pointer-events: none; }
.scan-frame { width: 210px; height: 210px; position: relative; }
.scan-corner { position: absolute; width: 32px; height: 32px; border-color: var(--accent); border-style: solid; }
.sc-tl { top: 0; left: 0;  border-width: 3px 0 0 3px; border-radius: 4px 0 0 0; }
.sc-tr { top: 0; right: 0; border-width: 3px 3px 0 0; border-radius: 0 4px 0 0; }
.sc-bl { bottom: 0; left: 0;  border-width: 0 0 3px 3px; border-radius: 0 0 0 4px; }
.sc-br { bottom: 0; right: 0; border-width: 0 3px 3px 0; border-radius: 0 0 4px 0; }
.scan-beam { position: absolute; left: 6px; right: 6px; height: 2px; background: linear-gradient(90deg,transparent,var(--accent),transparent); animation: scanBeam 2s ease-in-out infinite; }
.match-card { background: linear-gradient(135deg,rgba(255,107,53,.07),rgba(255,154,0,.04)); border: 1px solid rgba(255,107,53,.35); border-radius: var(--r); padding: 16px; animation: slideUp .3s; }
.price-chips { display: flex; gap: 8px; flex-wrap: wrap; margin: 12px 0; }
.price-chip  { background: var(--s2); border: 1px solid var(--b2); border-radius: var(--rs); padding: 8px 12px; flex: 1; min-width: 80px; text-align: center; }
.pc-lbl { font-size: 9px; color: var(--t3); font-family: var(--fm); text-transform: uppercase; letter-spacing: 1px; }
.pc-val { font-size: 15px; font-weight: 800; font-family: var(--fd); margin-top: 3px; }

@media print {
  body * { visibility: hidden; }
  #invoice-root, #invoice-root * { visibility: visible; }
  #invoice-root { position: fixed; inset: 0; background: white; z-index: 9999; padding: 30px; }
  #qr-root, #qr-root * { visibility: visible; }
  #qr-root { position: fixed; inset: 0; background: white; z-index: 9999; padding: 20px; }
  .no-print {display: none !important;}
}
#qr-root { display: none; }

/* ── Responsive ── */
@media (max-width: 1024px) {
  .order-layout, .scanner-layout { grid-template-columns: 1fr; }
  .cart-sticky { position: static; }
}
@media (max-width: 768px) {
  .sidebar { width: 60px; }
  .sidebar-logo-text, .sidebar-logo-sub, .nav-link span:not(.nav-icon), .nav-badge, .sidebar-foot span { display: none; }
  .main { margin-left: 60px; }
  .form-row, .form-row3, .grid2, .grid3 { grid-template-columns: 1fr; }
  .stats-grid { grid-template-columns: 1fr 1fr; }
  .page { padding: 14px; }
}
